digraph "<%= tree.display_name %>" {
<% tree.nodes.each_pair do |name, node|
    dot_label = !node.explanatory.nil? ? "{ #{node.display_name} | #{node.explanatory} }" : node.display_name
    attrs = { 'style' => 'rounded', 'shape' => 'record', 'label' => dot_label}
    attrs['style'] = 'bold' if node.is_a? Outcome
-%>
    <%= no_q(node.name) %> <%= render_attrs(attrs) %>;
<% end %>

<% # Render the answers (edges)

   tree.nodes.select {|name, node| node.is_a? Question}.each_pair do |name, node| %>
    <% node.answers.each_pair do |answer_name, leads_to| %>
    <%= no_q(node.name) %> -> <%= no_q(leads_to) %> [label="<%= no_q(answer_name.to_s.humanize) %>"];
    <% end %>
<% end %>
}